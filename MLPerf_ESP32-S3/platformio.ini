; PlatformIO Project Configuration File
; Arduino Nano ESP32 (ESP32-S3)

[platformio]
; Standardmäßig den Performance-Modus bauen
default_envs = nano_s3_perf

; -----------------------------------------------------------------
; GLOBALE EINSTELLUNGEN
; -----------------------------------------------------------------
[env]
platform = espressif32
board = arduino_nano_esp32
framework = espidf

; Debugging-Filter (hilft bei Crashes den Stacktrace zu lesen)
monitor_filters = direct, esp32_exception_decoder

; Große Partitionstabelle für ML-Modelle
board_build.partitions = partitions_singleapp_large.csv

; Upload-Einstellungen für den Nano ESP32
upload_protocol = esptool
board_upload.flash_size = 16MB
board_upload.maximum_size = 16777216
check_skip_packages = yes

; Basis Build-Flags für alle Umgebungen
build_flags =
    -std=c++17
    -Wno-error=all
    -D TF_LITE_STATIC_MEMORY
    ; Dein Modell (hier VWW01, anpassbar)
    -D TH_MODEL_VERSION=EE_MODEL_VERSION_VWW01

; -----------------------------------------------------------------
; UMGEBUNG 1: Performance Mode (Über USB)
; -----------------------------------------------------------------
[env:nano_s3_perf]
monitor_speed = 115200
build_flags =
    ${env.build_flags}
    -D EE_CFG_ENERGY_MODE=0

; -----------------------------------------------------------------
; UMGEBUNG 2: Energy Mode (Über TX/RX Pins)
; -----------------------------------------------------------------
[env:nano_s3_energy]
monitor_speed = 9600
build_flags =
    ${env.build_flags}
    -D EE_CFG_ENERGY_MODE=1